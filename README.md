# FinTracker

FinTracker โ ะบะพะผะฟะปะตะบัะฝะฐั ะฟะปะฐััะพัะผะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะปะธัะฝัะผะธ ัะธะฝะฐะฝัะฐะผะธ ะธ ะธะฝะฒะตััะธัะธัะผะธ ะฝะฐ Go.

## ๐ ะะพะทะผะพะถะฝะพััะธ

### ะฃะฟัะฐะฒะปะตะฝะธะต ัะธะฝะฐะฝัะฐะผะธ
- **ะกัะตัะฐ** โ ะฟะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ััะตัะพะฒ (ะฝะฐะปะธัะฝัะต, ะฑะฐะฝะบะพะฒัะบะธะต ะบะฐััั, ะบัะตะดะธัั, ะธะฝะฒะตััะธัะธะพะฝะฝัะต)
- **ะขัะฐะฝะทะฐะบัะธะธ** โ ััะตั ะดะพัะพะดะพะฒ ะธ ัะฐััะพะดะพะฒ ั ะบะฐัะตะณะพัะธะทะฐัะธะตะน
- **ะัะดะถะตัั** โ ะฟะปะฐะฝะธัะพะฒะฐะฝะธะต ะธ ะบะพะฝััะพะปั ัะฐััะพะดะพะฒ ะฟะพ ะบะฐัะตะณะพัะธัะผ
- **ะฆะตะปะธ** โ ะฟะพััะฐะฝะพะฒะบะฐ ัะธะฝะฐะฝัะพะฒัั ัะตะปะตะน ะธ ะพััะปะตะถะธะฒะฐะฝะธะต ะฟัะพะณัะตััะฐ
- **ะะฝะฐะปะธัะธะบะฐ** โ ะดะตัะฐะปัะฝัะต ะพััะตัั ะธ ััะฐัะธััะธะบะฐ
- **AI-ัะตะบะพะผะตะฝะดะฐัะธะธ** โ ะฟะตััะพะฝะฐะปัะฝัะต ัะธะฝะฐะฝัะพะฒัะต ัะพะฒะตัั ัะตัะตะท Ollama (ะปะพะบะฐะปัะฝัะน LLM)

### ะะฝะฒะตััะธัะธะพะฝะฝัะน ะผะพะดัะปั
- **ะะพัััะตะปะธ** โ ัะพะทะดะฐะฝะธะต ะธ ัะฟัะฐะฒะปะตะฝะธะต ะธะฝะฒะตััะธัะธะพะฝะฝัะผะธ ะฟะพัััะตะปัะผะธ
- **ะฆะตะฝะฝัะต ะฑัะผะฐะณะธ** โ ะฐะบัะธะธ, ะพะฑะปะธะณะฐัะธะธ, ETF
- **ะะพัะบะพะฒัะบะฐั ะฑะธัะถะฐ (MOEX)** โ ะธะฝัะตะณัะฐัะธั ั ัะพััะธะนัะบะธะผ ััะฝะบะพะผ
- **ะัะธะฟัะพะฒะฐะปััั** โ Bitcoin, Ethereum ะธ ะดััะณะธะต ัะตัะตะท CoinGecko
- **ะะพัะธัะพะฒะบะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ** โ ะฐะบััะฐะปัะฝัะต ัะตะฝั
- **ะะธะฒะธะดะตะฝะดั** โ ะพััะปะตะถะธะฒะฐะฝะธะต ะธ ัะฒะตะดะพะผะปะตะฝะธั
- **ะะฐะปะพะณะพะฒัะต ะพััะตัั** โ ัะฐััะตั ะฝะฐะปะพะณะพะฒ ะฟะพ ัะดะตะปะบะฐะผ

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- Go 1.23+
- PostgreSQL 14+
- Docker ะธ Docker Compose (ัะตะบะพะผะตะฝะดัะตััั)
- 4+ GB RAM (ะดะปั Ollama)

## ๐ ะฃััะฐะฝะพะฒะบะฐ

### ะะฐัะธะฐะฝั 1: Docker Compose (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะะปะพะฝะธัะพะฒะฐัั ะธ ะทะฐะฟัััะธัั
git clone https://github.com/your-username/fin-tracker.git
cd fin-tracker
docker-compose up -d

# ะะฐะณััะทะธัั AI ะผะพะดะตะปั (ะพะดะธะฝ ัะฐะท ะฟะพัะปะต ะฟะตัะฒะพะณะพ ะทะฐะฟััะบะฐ)
docker exec fintracker-ollama ollama pull llama3.2:3b
```

- API: `http://localhost:8080`
- Ollama: `http://localhost:11434`

#### Docker ะบะพะผะฐะฝะดั

```bash
# ะะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั (ะฒะบะปััะฐั AI)
docker-compose up -d

# ะััะฐะฝะพะฒะธัั
docker-compose down

# ะะพัะผะพััะตัั ะปะพะณะธ
docker-compose logs -f

# ะะพะณะธ ัะพะปัะบะพ API
docker-compose logs -f app

# ะะพะณะธ Ollama
docker-compose logs -f ollama

# ะะตัะตัะพะฑัะฐัั ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน
docker-compose up -d --build

# ะะพะดะบะปััะธัััั ะบ PostgreSQL
docker-compose exec postgres psql -U fintracker -d fintracker

# ะะพะปะฝัะน ัะฑัะพั (ัะดะฐะปัะตั ะดะฐะฝะฝัะต!)
docker-compose down -v
```

### ะะฐัะธะฐะฝั 2: ะะพะบะฐะปัะฝะฐั ัััะฐะฝะพะฒะบะฐ

```bash
# 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต
git clone https://github.com/your-username/fin-tracker.git
cd fin-tracker

# 2. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
cp env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env

# 3. ะกะพะทะดะฐะฝะธะต ะะ
createdb fintracker

# 4. ะะฐะฟััะบ
go mod download
go run cmd/server/main.go
```

ะกะตัะฒะตั ะทะฐะฟัััะธััั ะฝะฐ `http://localhost:8080`

## ๐ API ะะพะบัะผะตะฝัะฐัะธั

### ะััะตะฝัะธัะธะบะฐัะธั

```bash
# ะะตะณะธัััะฐัะธั
POST /api/v1/auth/register
{
  "email": "user@example.com",
  "password": "securepassword",
  "first_name": "ะะฒะฐะฝ",
  "last_name": "ะะฒะฐะฝะพะฒ"
}

# ะัะพะด
POST /api/v1/auth/login
{
  "email": "user@example.com",
  "password": "securepassword"
}

# ะัะฒะตั (ะดะปั register ะธ login)
{
  "access_token": "eyJhbGci...",    # ะบะพัะพัะบะพะถะธะฒััะธะน (15 ะผะธะฝ)
  "refresh_token": "dGhpcyBpcy...", # ะดะพะปะณะพะถะธะฒััะธะน (30 ะดะฝะตะน)
  "expires_at": 1704067200,
  "user": { ... }
}

# ะะฑะฝะพะฒะธัั ัะพะบะตะฝั
POST /api/v1/auth/refresh
{
  "refresh_token": "dGhpcyBpcy..."
}

# ะััะพะด
POST /api/v1/auth/logout
{
  "refresh_token": "dGhpcyBpcy..."
}

# ะััะพะด ัะพ ะฒัะตั ััััะพะนััะฒ (ััะตะฑัะตั ะฐะฒัะพัะธะทะฐัะธะธ)
POST /api/v1/auth/logout-all
Authorization: Bearer <access_token>
```

### ะกัะตัะฐ

```bash
# ะกะพะทะดะฐะฝะธะต ััะตัะฐ
POST /api/v1/accounts
Authorization: Bearer <access_token>
{
  "name": "ะัะฝะพะฒะฝะพะน ััะตั",
  "type": "bank",
  "currency": "RUB",
  "initial_balance": 100000
}

# ะกะฟะธัะพะบ ััะตัะพะฒ
GET /api/v1/accounts

# ะกะฒะพะดะบะฐ ะฟะพ ััะตัะฐะผ
GET /api/v1/accounts/summary
```

### ะขัะฐะฝะทะฐะบัะธะธ

```bash
# ะกะพะทะดะฐะฝะธะต ััะฐะฝะทะฐะบัะธะธ
POST /api/v1/transactions
{
  "account_id": "uuid",
  "category_id": "uuid",
  "type": "expense",
  "amount": 1500,
  "description": "ะัะพะดัะบัั ะฒ ะผะฐะณะฐะทะธะฝะต",
  "date": "2024-01-15"
}

# ะกะฟะธัะพะบ ััะฐะฝะทะฐะบัะธะน ั ัะธะปัััะฐะผะธ
GET /api/v1/transactions?type=expense&date_from=2024-01-01&limit=50
```

### ะัะดะถะตัั

```bash
# ะกะพะทะดะฐะฝะธะต ะฑัะดะถะตัะฐ
POST /api/v1/budgets
{
  "name": "ะัะพะดัะบัั",
  "category_id": "uuid",
  "amount": 30000,
  "currency": "RUB",
  "period": "monthly",
  "start_date": "2024-01-01"
}

# ะกะฒะพะดะบะฐ ะฟะพ ะฑัะดะถะตัะฐะผ
GET /api/v1/budgets/summary

# ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฟัะตะฒััะตะฝะธะธ
GET /api/v1/budgets/alerts
```

### ะะฝะฒะตััะธัะธะธ

```bash
# ะะพะธัะบ ัะตะฝะฝัั ะฑัะผะฐะณ
GET /api/v1/investments/securities/search?q=SBER&exchange=MOEX

# ะะพะปััะตะฝะธะต ะบะพัะธัะพะฒะบะธ
GET /api/v1/investments/securities/SBER/quote?exchange=MOEX

# ะกะพะทะดะฐะฝะธะต ะฟะพัััะตะปั
POST /api/v1/portfolios
{
  "name": "ะะพะน ะฟะพัััะตะปั",
  "currency": "RUB",
  "broker_name": "ะขะธะฝัะบะพัั"
}

# ะะพะฑะฐะฒะปะตะฝะธะต ัะดะตะปะบะธ
POST /api/v1/investments/transactions
{
  "portfolio_id": "uuid",
  "security_id": "uuid",
  "type": "buy",
  "date": "2024-01-15",
  "quantity": 10,
  "price": 250.50,
  "commission": 50
}

# ะะฝะฐะปะธัะธะบะฐ ะฟะพัััะตะปั
GET /api/v1/investments/portfolios/{id}/analytics

# ะะฐะปะพะณะพะฒัะน ะพััะตั
GET /api/v1/investments/portfolios/{id}/tax-report?year=2024
```

### ะะฝะฐะปะธัะธะบะฐ

```bash
# ะคะธะฝะฐะฝัะพะฒะฐั ัะฒะพะดะบะฐ
GET /api/v1/analytics/summary?period=month

# ะะตะฝะตะถะฝัะน ะฟะพัะพะบ
GET /api/v1/analytics/cashflow?period=year

# ะขัะตะฝะดั ัะฐััะพะดะพะฒ
GET /api/v1/analytics/trends?months=6

# ะงะธััะฐั ััะพะธะผะพััั ะฐะบัะธะฒะพะฒ
GET /api/v1/analytics/networth

# ะคะธะฝะฐะฝัะพะฒะพะต ะทะดะพัะพะฒัะต
GET /api/v1/analytics/health

# AI-ัะตะบะพะผะตะฝะดะฐัะธะธ (ะฟะตััะพะฝะฐะปัะฝัะต ัะพะฒะตัั ะพั Ollama)
GET /api/v1/analytics/recommendations
```

## ๐ ะััะธัะตะบัััะฐ

```
fin-tracker/
โโโ cmd/
โ   โโโ server/
โ       โโโ main.go              # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ internal/
โ   โโโ ai/                      # AI-ะธะฝัะตะณัะฐัะธะธ
โ   โ   โโโ ollama.go            # ะะปะธะตะฝั Ollama ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน
โ   โโโ api/
โ   โ   โโโ handlers/            # HTTP ะพะฑัะฐะฑะพััะธะบะธ
โ   โ   โโโ middleware/          # Middleware (auth, cors, logging)
โ   โ   โโโ server.go            # ะะฐัััััะธะทะฐัะธั
โ   โโโ config/                  # ะะพะฝัะธะณััะฐัะธั
โ   โโโ database/                # ะะพะดะบะปััะตะฝะธะต ะบ ะะ ะธ ะผะธะณัะฐัะธะธ
โ   โโโ market/                  # ะัะพะฒะฐะนะดะตัั ััะฝะพัะฝัั ะดะฐะฝะฝัั
โ   โ   โโโ moex.go              # ะะพัะบะพะฒัะบะฐั ะฑะธัะถะฐ (MOEX)
โ   โ   โโโ crypto.go            # ะัะธะฟัะพะฒะฐะปััั (CoinGecko)
โ   โโโ models/                  # ะะพะดะตะปะธ ะดะฐะฝะฝัั
โ   โโโ repository/              # ะกะปะพะน ัะฐะฑะพัั ั ะะ
โ   โโโ service/                 # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โโโ Dockerfile                   # ะกะฑะพัะบะฐ ะพะฑัะฐะทะฐ
โโโ docker-compose.yml           # Dev ะพะบััะถะตะฝะธะต
โโโ docker-compose.prod.yml      # Production ะฝะฐัััะพะนะบะธ
โโโ env.example                  # ะัะธะผะตั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
โโโ go.mod
โโโ README.md
```

## ๐ ะะพะดะดะตัะถะบะฐ ััะฝะบะพะฒ

### ะะพััะธะนัะบะธะน ััะฝะพะบ
- **MOEX** โ ะะพัะบะพะฒัะบะฐั ะฑะธัะถะฐ (ะฐะบัะธะธ, ะพะฑะปะธะณะฐัะธะธ, ETF)

### ะัะธะฟัะพะฒะฐะปััั
- Bitcoin, Ethereum ะธ ะดััะณะธะต ัะตัะตะท CoinGecko API

## ๐ง ะะพะฝัะธะณััะฐัะธั

| ะะตัะตะผะตะฝะฝะฐั | ะะฟะธัะฐะฝะธะต | ะะพ ัะผะพะปัะฐะฝะธั |
|------------|----------|--------------|
| `PORT` | ะะพัั ัะตัะฒะตัะฐ | 8080 |
| `DATABASE_URL` | URL ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL | - |
| `JWT_SECRET` | ะกะตะบัะตัะฝัะน ะบะปัั ะดะปั JWT (ะผะธะฝ. 32 ัะธะผะฒะพะปะฐ) | - |
| `ACCESS_TOKEN_EXPIRATION_MINUTES` | ะัะตะผั ะถะธะทะฝะธ access token | 15 |
| `REFRESH_TOKEN_EXPIRATION_DAYS` | ะัะตะผั ะถะธะทะฝะธ refresh token | 30 |
| `MOEX_ENABLED` | ะะบะปััะธัั ะธะฝัะตะณัะฐัะธั ั MOEX | true |
| `DEFAULT_CURRENCY` | ะะฐะปััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั | RUB |
| `OLLAMA_URL` | URL ัะตัะฒะตัะฐ Ollama | http://ollama:11434 |
| `OLLAMA_MODEL` | ะะพะดะตะปั ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน | llama3.2:3b |

## ๐ ะะฐัะตะณะพัะธะธ ะฟะพ ัะผะพะปัะฐะฝะธั

### ะะพัะพะดั
- ๐ฐ ะะฐัะฟะปะฐัะฐ
- ๐ป ะคัะธะปะฐะฝั
- ๐ ะะฝะฒะตััะธัะธะธ
- ๐ต ะะธะฒะธะดะตะฝะดั
- ๐ ะะพะดะฐัะบะธ

### ะะฐััะพะดั
- ๐ ะัะพะดัะบัั
- ๐ฝ๏ธ ะะตััะพัะฐะฝั
- ๐ ะขัะฐะฝัะฟะพัั
- ๐ ะะธะปัะต
- ๐ก ะะพะผะผัะฝะฐะปัะฝัะต ััะปัะณะธ
- ๐ฅ ะะดะพัะพะฒัะต
- ๐ฌ ะะฐะทะฒะปะตัะตะฝะธั
- ๐ ะะฑัะฐะทะพะฒะฐะฝะธะต
- โ๏ธ ะััะตัะตััะฒะธั

## ๐ณ Docker

### ะกัััะบัััะฐ ะบะพะฝัะตะนะฝะตัะพะฒ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  Docker Network                       โ
โ                                                       โ
โ  โโโโโโโโโโโโโโ    โโโโโโโโโโโโโโ    โโโโโโโโโโโโโโ โ
โ  โ fintracker โโโโโถโ PostgreSQL โ    โ   Ollama   โ โ
โ  โ   :8080    โ    โ   :5432    โ    โ  :11434    โ โ
โ  โโโโโโโฌโโโโโโโ    โโโโโโโฌโโโโโโโ    โโโโโโโฌโโโโโโโ โ
โ        โ                 โ                 โ         โ
โ        โ           โโโโโโโผโโโโโโ     โโโโโโโผโโโโโโ  โ
โ        โโโโโโโโโโโโถโ  pg-data  โ     โ ollama-   โ  โ
โ                    โ  volume   โ     โ   data    โ  โ
โ                    โโโโโโโโโโโโโ     โโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะตะบะพะผะตะฝะดัะตะผัะต AI-ะผะพะดะตะปะธ

| ะะพะดะตะปั | RAM | ะะฐัะตััะฒะพ | ะะฟะธัะฐะฝะธะต |
|--------|-----|----------|----------|
| `llama3.2:1b` | ~2GB | ะะฐะทะพะฒะพะต | ะััััะฐั, ะดะปั ัะปะฐะฑัั ะผะฐัะธะฝ |
| `llama3.2:3b` | ~4GB | ะฅะพัะพัะตะต | ะะฐะปะฐะฝั ัะบะพัะพััะธ ะธ ะบะฐัะตััะฒะฐ |
| `phi3:mini` | ~3GB | ะฅะพัะพัะตะต | ะะพะผะฟะฐะบัะฝะฐั ะพั Microsoft |
| `gemma2:2b` | ~3GB | ะฅะพัะพัะตะต | ะั Google |

### Production ะดะตะฟะปะพะน

```bash
# ะฃััะฐะฝะพะฒะธัั ัะตะบัะตัั
export JWT_SECRET="ะฒะฐั-ัะตะบัะตัะฝัะน-ะบะปัั-ะผะธะฝะธะผัะผ-32-ัะธะผะฒะพะปะฐ"
export POSTGRES_PASSWORD="ะฝะฐะดัะถะฝัะน-ะฟะฐัะพะปั-ะดะปั-ะฑะด"

# ะะฐะฟัััะธัั ั production ะบะพะฝัะธะณะพะผ
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
```

## ๐ง ะขะตัะฝะพะปะพะณะธะธ

- **Go 1.23+** โ ัะทัะบ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั
- **Gin** โ HTTP ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- **pgx** โ PostgreSQL ะดัะฐะนะฒะตั ั ะฟัะปะพะผ ัะพะตะดะธะฝะตะฝะธะน
- **JWT** โ ะฐััะตะฝัะธัะธะบะฐัะธั
- **shopspring/decimal** โ ัะพัะฝะฐั ะฐัะธัะผะตัะธะบะฐ ะดะปั ัะธะฝะฐะฝัะพะฒ
- **Docker** โ ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
- **Ollama** โ ะปะพะบะฐะปัะฝัะน LLM ะดะปั AI-ัะตะบะพะผะตะฝะดะฐัะธะน

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- **JWT ะฐััะตะฝัะธัะธะบะฐัะธั ั ะฟะฐัะพะน ัะพะบะตะฝะพะฒ:**
  - Access token (15 ะผะธะฝ) โ ะดะปั ะดะพัััะฟะฐ ะบ API
  - Refresh token (30 ะดะฝะตะน) โ ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั access token
  - ะะพะทะผะพะถะฝะพััั ะพัะทัะฒะฐ ัะพะบะตะฝะพะฒ (logout, logout-all)
- ะฅะตัะธัะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน (bcrypt)
- CORS ะทะฐัะธัะฐ
- Prepared statements ะดะปั ะทะฐัะธัั ะพั SQL-ะธะฝัะตะบัะธะน
- pgx โ ะฑะตะทะพะฟะฐัะฝัะน ะดัะฐะนะฒะตั ั ะทะฐัะธัะพะน ะพั SQL-ะธะฝัะตะบัะธะน

## ๐ ะะธัะตะฝะทะธั

MIT License

## ๐ค ะะพะฝััะธะฑััะธั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature branch (`git checkout -b feature/amazing-feature`)
3. Commit ะธะทะผะตะฝะตะฝะธั (`git commit -m 'Add amazing feature'`)
4. Push ะฒ branch (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

